<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>会议列表</title>
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">    
	<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
	<meta http-equiv="description" content="This is my page">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<!--
	<link rel="stylesheet" type="text/css" href="styles.css">
	
	 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.css" />
	 <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
	 <script src="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.js"></script>
	-->  
	 <script src="include/jquery-1.8.3.min.js"></script>
	 <script src="include/googleButton/google.fastbutton.js"></script>
	<script src="include/googleButton/jquery.google.fastbutton.js"></script>
	<script src="cordova.js"></script>
	 <script>  
	 	var myIP = "192.168.1.104:8080";
	     //设置 必须引用在jqueryMobile 之前 
		$(document).bind("mobileinit", function()  
		{  
			 $.mobile.ajaxEnabled = true;
		     $.mobile.defaultPageTransition = 'none';  
		     $.mobile.defaultDialogTransition = 'none';
		     $.mobile.page.prototype.options.domCache=true; //页面缓存
	  	     $.mobile.transitionFallbacks.slideout = "none"; //防止闪屏  
			  //alert($.mobile.ajaxEnabled);
			  
              app.initialize();
			   alert(device.platform);
			   alert(device.uuid);
			   alert(device.version);
			   alert(device.uuid);
		});     
	</script> 
	<!--  -->
	 <script src="include/jquery.mobile-1.4.2.min.js"></script>
	 <link rel="stylesheet" href="include/jquery.mobile-1.4.2.min.css" />
	 
  	
  	<style type="text/css">
  		.ui-page { -webkit-backface-visibility: hidden; }
  		.actGotop{position:fixed;_position:absolute;bottom:15;right:10px;width:50px;height:50px;}
  		.pop.out.reverse{
			 -webkit-transform:scale(.2);
			 opacity:0;
			 -webkit-animation-name:null;
			 z-index:10;
		}
  	</style>
  
  </head>
  
  <body >
 <!-- 
 
 data-rel: opens External 
 data-prefetch="true"
 data-transition = "none"
 $(this).attr("bid")
 $.mobile.changePage($.mobile.activePage.jqmData('url'), {reloadPage : true});   刷新 
  -->      	
       	
<div data-role="page" id="index" >
  <div data-role="header" data-theme="a"  data-position="fixed" data-tap-toggle="false">
  <h1>|í、БābУ 公交查询</h1>
  <nav data-role="navbar">
    <ul>
      <li><a data-icon="home" data-transition="none" class="ui-btn-active">首页</a></li>
      <li><a id="b_sb" data-rel="dialog" data-transition="none" data-icon="search">查询</a></li>
      <li><a href="#email" data-rel="dialog" data-icon="grid" data-transition="none">邮件</a></li>
      <li><a href="#phoneInfo" data-rel="dialog" data-icon="star" data-transition="none">关于手机</a></li>
    </ul>
  </nav>
  </div>
  
  <div  data-role="content">
  		<div class="ui-field-contain">
    <label for="select-native-1">Basic:</label>
    <select name="select-native-1" id="select-native-1" >
        <option value="1">The 1st Option</option>
        <option value="2">The 2nd Option</option>
        <option value="3">The 3rd Option</option>
        <option value="4">The 4th Option</option>
          <option value="1">The 1st Option</option>
        <option value="2">The 2nd Option</option>
        <option value="3">The 3rd Option</option>
        <option value="4">The 4th Option</option>
          <option value="1">The 1st Option</option>
        <option value="2">The 2nd Option</option>
        <option value="3">The 3rd Option</option>
        <option value="4">The 4th Option</option>
          <option value="1">The 1st Option</option>
        <option value="2">The 2nd Option</option>
        <option value="3">The 3rd Option</option>
        <option value="4">The 4th Option</option>
    </select>
</div>
       <p style="text-align:center;color:grey;display:none;">成都市所有公交车列表</p>
       <ul id="bus_list" data-role="listview" data-autodividers="true" data-inset="true" data-filter="true" data-filter-placeholder="搜索公交路线">
		    <li><a href="#">正在加载...</a></li>
	  </ul>
	  <div class="actGotop"><a href="javascript:;" title="返回顶部">顶部</a></div>
  </div>
   
   <div data-role="footer" data-position="fixed" data-theme="a" data-tap-toggle="false">
   <h1>版权所有 |í、БābУ</h1>
  </div>
</div> 

<!-- 站台信息 -->
<div data-role="page" id="search_bus">
  <div data-role="header" data-position="fixed">
	  <h1 id="bus_name">188路</h1><!--   -->
	   <a id="bb" class="ui-btn-right"  data-icon="back" data-rel="back">返回</a>
   </div>
  <div data-role="tabs">
	      <div data-role="navbar">
		    <ul>
		      <li><a id="tab_sx" href="#bus_station_z" data-ajax="true" class="ui-btn-active">上行</a></li>
		      <li><a href="#bus_station_f" data-ajax="true" >下行</a></li>
		    </ul>
		  </div>
		  <div id="bus_station_z"   style="margin-top:5px;">
		    <ul data-role="listview" data-inset="true">
		        <li><a href="#">正在加载...</a></li>
		    </ul>
		  </div>
		   <div id="bus_station_f"  style="margin-top:5px;">
		    <ul data-role="listview" data-inset="true">
		        <li><a href="#">正在加载...</a></li>
		    </ul>
		  </div>
    </div>
     <div data-role="footer" data-position="fixed" data-theme="a" data-tap-toggle="false">
	   <h1>版权所有 |í、БābУ</h1>
	 </div>
</div> 

<!-- 设备信息 -->
<div data-role="page" id="phoneInfo">
  <div data-role="header" data-position="fixed">
	  <h1 id="bus_name">我的手机</h1><!--   -->
	   <a  class="ui-btn-right"  data-icon="back" data-rel="back">返回</a>
   </div>
  <div data-role="content">
	      ddddddddd
  </div>
     <div data-role="footer" data-position="fixed" data-theme="a" data-tap-toggle="false">
	   <h1>版权所有 |í、БābУ</h1>
	 </div>
</div> 
	 
	 <!-- http://mianyang.dd100.net:8080 -->
 <script type='text/javascript' src='/meetManager/dwr/interface/cbus.js'></script>
     <script type='text/javascript' src='/meetManager/dwr/engine.js'></script>
 <script type="text/javascript">
 		 //初始化
	  	 $(document).on("pageinit","#index",function(){
			    $("#index").on("swipeleft",function(){
			       $.mobile.changePage("#search_bus");
			  });
			  
		 });
		 
 		 //DWREngine.setMethod(DWREngine.ScriptTag);
	     //cbus._path = "http://mianyang.dd100.net:8080/meetManager/dwr";
	  	 cbus.getBusList(slist);
	  	 
	  	 function slist(list){
	  	 	 var len = list.length;
	  	 	 var str ="";
	  	 	 
	  	 	 $("#bus_list").html("");
	  	 	 for(var i=0;i<len;i++){
	  	 	 	  var obj = list[i];
	  	 	 	  $("#bus_list").append("<li id='ID_"+obj.bid+"'  bname='"+obj.bname+"' bid='"+obj.bid+"'><a>"+obj.bname+"<span class='ui-li-count'>25</span></a></li>");
	  	 		  //绑定事件
	  	 		  $("#ID_"+obj.bid).fastClick(function(e){
	  	 	 			 $.mobile.changePage("#search_bus");
	  	 	 			 $("#bus_name").html($(this).attr("bname"));
					     cbus.getBusStation($(this).attr("bid"),"",showR);
				  });
	  	 	 }
	  	 	 
	  	 	 $("#bus_list").listview('refresh');
	  	 	 
	  	 	 //$("#bus_list").append(str);
	  	 	  
	  	 	  //$('ul#bus_list').find("li").each(function(){
	  	 	 		//$(this).fastClick(function(e){ 
	  	 	 			// $.mobile.changePage("#search_bus");
	  	 	 		 	 //$.mobile.changePage("#search_bus",'none', false, false);
					     //$("#bus_name").html($(this).attr("bname"));
					     //cbus.getBusStation($(this).attr("bid"),"",showR);
					//});
	  	 	 		 
	  	 	 		//$(this).live("tap",function(){
					     //$.mobile.changePage("#search_bus",'none', false, false);
					//});
	  	 	 //});
	  	 }
	  	 
	   
	     function showR(list){
	     	var len = list.length;
	  	 	 var str ="";
	  	 	 for(var i=0;i<len;i++){
	  	 	 	  var obj = list[i];
	  	 	 	  str +="<li><a>"+obj.st_name+"</li>";
	  	 	 }
	  	 	 
	  	 	 //document.getElementById("bus_list").innerHTML = str;
	  	 	 $("#bus_station_z ul").html("");
	  	 	 $("#bus_station_z ul").append(str);
	  	 	 $("#bus_station_z ul").listview('refresh');
	     }
	  	 
	  	
		 
 </script>
       	
  </body>
</html>
